/*
 * Inline Form Validation Engine 2.6.2, jQuery plugin * Copyright(c) 2010, Cedric Dugas * http://www.position-absolute.com * 2.0 Rewrite by Olivier Refalo * http://www.crionics.com * Form validation engine allowing custom regex rules to be added. * Licensed under the MIT License
 * Modified by sebastienheraud for SEBLOD (App Builder & CCK) // SEBLOD nano (Form Builder).
 */
(function($){$.fn.validationEngineLanguage = function(){};$.validationEngineLanguage = {newLang: function(moreRules){allRules = {};$.validationEngineLanguage.allRules = $.extend(allRules, moreRules);}};})(jQuery);
 !function(T){"use strict";var F={init:function(e){var t=this;return t.data("jqv")&&null!=t.data("jqv")||(e=F._saveOptions(t,e),T("body").on("click",".formError",function(){T(this).fadeOut(150,function(){T(this).parent(".formErrorOuter").remove(),T(this).remove()})})),this},attach:function(e){var t,a=this;return(t=e?F._saveOptions(a,e):a.data("jqv")).validateAttribute=a.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class",t.binded&&(a.on(t.validationEventTrigger,"["+t.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",F._onFieldEvent),a.on("click","["+t.validateAttribute+"*=validate][type=checkbox],["+t.validateAttribute+"*=validate][type=radio]",F._onFieldEvent),a.on(t.validationEventTrigger,"["+t.validateAttribute+"*=validate][class*=datepicker]",{delay:300},F._onFieldEvent)),t.autoPositionUpdate&&T(window).bind("resize",{noAnimation:!0,formElem:a},F.updatePromptsPosition),a.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",F._submitButtonClick),a.removeData("jqv_submitButton"),a.on("submit",F._onSubmitEvent),this},detach:function(){var e=this,t=e.data("jqv");return e.find("["+t.validateAttribute+"*=validate]").not("[type=checkbox]").off(t.validationEventTrigger,F._onFieldEvent),e.find("["+t.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").off("click",F._onFieldEvent),e.off("submit",F.onAjaxFormComplete),e.off("submit",F.onAjaxFormComplete),e.removeData("jqv"),e.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",F._submitButtonClick),e.removeData("jqv_submitButton"),t.autoPositionUpdate&&T(window).unbind("resize",F.updatePromptsPosition),this},validate:function(e){e=e||"form.save";var t=T(this),a=null;if(!t.is("form")&&!t.hasClass("validationEngineContainer")||t.hasClass("validating"))if(t.is("form")||t.hasClass("validationEngineContainer")){r=t.data("jqv");t.removeClass("validating")}else{var i=t.closest("form, .validationEngineContainer");r=i.data("jqv")?i.data("jqv"):T.validationEngine.defaults;(a=F._validateField(t,r))&&r.onFieldSuccess?r.onFieldSuccess():r.onFieldFailure&&0<r.InvalidFields.length&&r.onFieldFailure()}else{t.addClass("validating");var r=t.data("jqv"),a=F._validateFields(this);setTimeout(function(){t.removeClass("validating")},100),a&&r.onSuccess?r.onSuccess():!a&&r.onFailure&&r.onFailure()}return r.onValidationComplete?!!r.onValidationComplete(i,a):(-1!=e.indexOf("JCck.")?(r.submitPkg=e,r.submitFct="",r.submitTask=""):r.submitTask=e,r.eventTrigger="submit",a)},updatePromptsPosition:function(e){if(e&&this==window)var i=e.data.formElem,r=e.data.noAnimation;else i=T(this.closest("form, .validationEngineContainer"));var l=i.data("jqv");return i.find("["+l.validateAttribute+"*=validate]").not(":disabled").each(function(){var e=T(this);l.prettySelect&&e.is(":hidden")&&(e=i.find("#"+l.usePrefix+e.attr("id")+l.useSuffix));var t=F._getPrompt(e),a=T(t).find(".formErrorContent").html();t&&F._updatePrompt(e,T(t),a,void 0,!1,l,r)}),this},showPrompt:function(e,t,a,i){var r=this.closest("form, .validationEngineContainer").data("jqv");return r||(r=F._saveOptions(this,r)),a&&(r.promptPosition=a),r.showArrow=1==i,F._showPrompt(this,e,t,!1,r),this},hide:function(){var e,t=T(this).closest("form, .validationEngineContainer").data("jqv"),a=t&&t.fadeDuration?t.fadeDuration:.3;return e=T(this).is("form")||T(this).hasClass("validationEngineContainer")?"parentForm"+F._getClassName(T(this).attr("id")):F._getClassName(T(this).attr("id"))+"formError",T("."+e).fadeTo(a,.3,function(){T(this).parent(".formErrorOuter").remove(),T(this).remove()}),this},hideAll:function(){var e=this.data("jqv"),t=e?e.fadeDuration:300;return T(".formError").fadeTo(t,300,function(){T(this).parent(".formErrorOuter").remove(),T(this).remove()}),this},_onFieldEvent:function(e){var t=T(this),a=t.closest("form, .validationEngineContainer").data("jqv");a.eventTrigger="field",window.setTimeout(function(){F._validateField(t,a),0==a.InvalidFields.length&&a.onFieldSuccess?a.onFieldSuccess():0<a.InvalidFields.length&&a.onFieldFailure&&a.onFieldFailure()},e.data?e.data.delay:0)},_onSubmitEvent:function(){var e=T(this),t=e.data("jqv");if(e.data("jqv_submitButton")){var a=T("#"+e.data("jqv_submitButton"));if(a&&0<a.length&&(a.hasClass("validate-skip")||"true"==a.attr("data-validation-engine-skip")))return!0}t.eventTrigger="submit";var i=F._validateFields(e);return i&&t.ajaxFormValidation?(F._validateFormWithAjax(e,t),!1):t.onValidationComplete?!!t.onValidationComplete(e,i):i},_checkAjaxStatus:function(e){var a=!0;return T.each(e.ajaxValidCache,function(e,t){if(!t)return a=!1}),a},_checkAjaxFieldStatus:function(e,t){return 1==t.ajaxValidCache[e]},_validateFields:function(a){var i=a.data("jqv"),r=!1;a.trigger("jqv.form.validating");var l=null;if(a.find("["+i.validateAttribute+"*=validate]").not(":disabled").each(function(){var e=T(this),t=[];if(T.inArray(e.attr("name"),t)<0){if((r|=F._validateField(e,i))&&null==l&&(l=e.is(":hidden")&&i.prettySelect?e=a.find("#"+i.usePrefix+F._jqSelector(e.attr("id"))+i.useSuffix):e),i.doNotShowAllErrosOnSubmit)return!1;if(t.push(e.attr("name")),1==i.showOneMessage&&r)return!1}}),a.trigger("jqv.form.result",[r]),r){if(i.scroll){var e=l.offset().top,t=l.offset().left,o=i.promptPosition;if("string"==typeof o&&-1!=o.indexOf(":")&&(o=o.substring(0,o.indexOf(":"))),"bottomRight"!=o&&"bottomLeft"!=o){var n=F._getPrompt(l);n&&(e=n.offset().top)}if(i.scrollOffset&&(e-=i.scrollOffset),i.isOverflown){var s=T(i.overflownDIV);if(!s.length)return!1;e+=s.scrollTop()+-parseInt(s.offset().top)-5,T(i.overflownDIV+":not(:animated)").animate({scrollTop:e},1100,function(){i.focusFirstField&&l.focus()})}else T("html, body").animate({scrollTop:e},1100,function(){i.focusFirstField&&l.focus()}),T("html, body").animate({scrollLeft:t},1100)}else i.focusFirstField&&l.focus();return!1}return!0},_validateFormWithAjax:function(s,d){var e=s.serialize(),t=d.ajaxFormValidationMethod?d.ajaxFormValidationMethod:"GET",a=d.ajaxFormValidationURL?d.ajaxFormValidationURL:s.attr("action"),u=d.dataType?d.dataType:"json";T.ajax({type:t,url:a,cache:!1,dataType:u,data:e,form:s,methods:F,options:d,beforeSend:function(){return d.onBeforeAjaxFormValidation(s,d)},error:function(e,t){F._ajaxError(e,t)},success:function(e){if("json"==u&&!0!==e){for(var t=!1,a=0;a<e.length;a++){var i=e[a],r=i[0],l=T(T("#"+r)[0]);if(1==l.length){var o=i[2];if(1==i[1])if(""!=o&&o){if(d.allrules[o])(n=d.allrules[o].alertTextOk)&&(o=n);d.showPrompts&&F._showPrompt(l,o,"pass",!1,d,!0)}else F._closePrompt(l);else{var n;if(t|=!0,d.allrules[o])(n=d.allrules[o].alertText)&&(o=n);d.showPrompts&&F._showPrompt(l,o,"",!1,d,!0)}}}d.onAjaxFormComplete(!t,s,e,d)}else d.onAjaxFormComplete(!0,s,e,d)}})},_checkFieldDisplayStatus:function(e){return!!e.parents(".cck-tab-pane").length&&e.parents(".cck-tab-pane")},_validateField:function(e,t,a){e.attr("id")||(e.attr("id","form-validation-field-"+T.validationEngine.fieldIdCounter),++T.validationEngine.fieldIdCounter);var i=!1;if(e.is(":hidden"))if(i=F._checkFieldDisplayStatus(e));else if(!t.validateNonVisibleFields&&!t.prettySelect||e.parent().is(":hidden"))return;var r=e.attr(t.validateAttribute),l=/validate\[(.*)\]/.exec(r);if(!l)return!1;var o=l[1].split(/\[|,|\]/),n=e.attr("name"),s="",d="",u=!1,c=!1;t.isError=!1,t.showArrow=!0,0<t.maxErrorsPerField&&(c=!0);for(var f=T(e.closest("form, .validationEngineContainer")),v=0;v<o.length;v++)o[v]=o[v].replace(" ",""),""===o[v]&&delete o[v];v=0;for(var p=0;v<o.length;v++){if(c&&p>=t.maxErrorsPerField){if(!u){var m=T.inArray("required",o);u=-1!=m&&v<=m}break}var h=void 0;switch(o[v]){case"required":u=!0,h=F._required(e,o,v,t);break;case"require":u=!0,h=F._require(e,o,v,t);break;case"custom":h=F._custom(e,o,v,t);break;case"groupRequired":var x="["+t.validateAttribute+"*="+o[v+1]+"]";(g=f.find(x).eq(0))[0]!=e[0]&&(F._validateField(g,t,a),t.showArrow=!0),(h=F._groupRequired(e,o,v,t))&&(u=!0),t.showArrow=!1;break;case"groupRequire":var g;x="["+t.validateAttribute+"*="+o[v+1]+"]";(g=f.find(x).eq(0))[0]!=e[0]&&(F._validateField(g,t,a),t.showArrow=!0),(h=F._groupRequire(e,o,v,t))&&(u=!0),t.showArrow=!1;break;case"ajax":(h=F._ajax(e,o,v,t))&&(d="load");break;case"minSize":h=F._minSize(e,o,v,t);break;case"maxSize":h=F._maxSize(e,o,v,t);break;case"min":h=F._min(e,o,v,t);break;case"max":h=F._max(e,o,v,t);break;case"past":h=F._past(f,e,o,v,t);break;case"future":h=F._future(f,e,o,v,t);break;case"isFuture":h=F._isFuture(f,e,o,v,t);break;case"dateRange":x="["+t.validateAttribute+"*="+o[v+1]+"]";t.firstOfGroup=f.find(x).eq(0),t.secondOfGroup=f.find(x).eq(1),(t.firstOfGroup[0].value||t.secondOfGroup[0].value)&&(h=F._dateRange(e,o,v,t)),h&&(u=!0),t.showArrow=!1;break;case"dateTimeRange":x="["+t.validateAttribute+"*="+o[v+1]+"]";t.firstOfGroup=f.find(x).eq(0),t.secondOfGroup=f.find(x).eq(1),(t.firstOfGroup[0].value||t.secondOfGroup[0].value)&&(h=F._dateTimeRange(e,o,v,t)),h&&(u=!0),t.showArrow=!1;break;case"maxCheckbox":e=T(f.find("input[name='"+n+"']")),h=F._maxCheckbox(f,e,o,v,t);break;case"minCheckbox":e=T(f.find("input[name='"+n+"']")),h=F._minCheckbox(f,e,o,v,t);break;case"confirmed":void 0!==(h=F._confirmed(e,o,v,t))&&(u=!0);break;case"confirm":void 0!==(h=F._confirm(e,o,v,t))&&(u=!0);break;case"funcCall":h=F._funcCall(e,o,v,t);break;case"maxTag":u=!0,h=F._maxTag(e,o,v,t);break;case"minTag":u=!0,h=F._minTag(e,o,v,t);break;case"condRequired":void 0!==(h=F._condRequired(e,o,v,t))&&(u=!0);break;case"condRequire":void 0!==(h=F._condRequire(e,o,v,t))&&(u=!0)}var b=!1;if("object"==typeof h)switch(h.status){case"_break":b=!0;break;case"_error":h=h.message;break;case"_error_no_prompt":return!0}if(b)break;"string"==typeof h&&(s+=h+"<br/>",p++,!(t.isError=!0)!==i&&i.length&&(!u&&!e.val()&&e.val().length<1||T.each(i,function(e,t){T(t).parent().prev(".cck-tabs").children().eq(T(t).index()).addClass("cck-tab-required")})))}!u&&!e.val()&&e.val().length<1&&(t.isError=!1);var _=e.prop("type"),C=e.data("promptPosition")||t.promptPosition;("radio"==_||"checkbox"==_)&&1<f.find("input[name='"+n+"']").length&&(e=T("inline"===C?f.find("input[name='"+n+"'][type!=hidden]:last"):f.find("input[name='"+n+"'][type!=hidden]:first")),t.showArrow=!1),e.is(":hidden")&&t.prettySelect&&(e=f.find("#"+t.usePrefix+F._jqSelector(e.attr("id"))+t.useSuffix)),t.isError&&t.showPrompts?F._showPrompt(e,s,d,!1,t):F._closePrompt(e),e.trigger("jqv.field.result",[e,t.isError,s]);var k=T.inArray(e[0],t.InvalidFields);return-1==k?t.isError&&t.InvalidFields.push(e[0]):t.isError||t.InvalidFields.splice(k,1),F._handleStatusCssClasses(e,t),t.isError&&t.onFieldFailure&&t.onFieldFailure(e),!t.isError&&t.onFieldSuccess&&t.onFieldSuccess(e),t.isError},_handleStatusCssClasses:function(e,t){t.addSuccessCssClassToField&&e.removeClass(t.addSuccessCssClassToField),t.addFailureCssClassToField&&e.removeClass(t.addFailureCssClassToField),t.addSuccessCssClassToField&&!t.isError&&e.addClass(t.addSuccessCssClassToField),t.addFailureCssClassToField&&t.isError&&e.addClass(t.addFailureCssClassToField)},_required:function(e,t,a,i,r){switch(e.attr("type")){case"text":case"password":case"textarea":default:var l=T.trim(e.val()),o=T.trim(e.attr("data-validation-placeholder")),n=T.trim(e.attr("placeholder"));if(!l||o&&l==o||n&&l==n)return i.allrules[t[a]].alertText;break;case"file":var s=e.attr("id"),d=T("#"+s+"_hidden").val();if((!T.trim(e.val())||e.val()==e.attr("data-validation-placeholder"))&&(""==d||"/"==d[d.length-1]||T("#"+s+"_delete").length&&T("#"+s+"_delete").prop("checked")))return i.allrules[t[a]].alertText;break;case"radio":case"checkbox":if(r){if(!e.prop("checked"))return i.allrules[t[a]].alertTextCheckboxMultiple;break}var u=e.closest("form, .validationEngineContainer"),c=e.attr("name");if(0==u.find("input[name='"+c+"']:checked").length)return 1==u.find("input[name='"+c+"']:visible").length?i.allrules[t[a]].alertTextCheckboxe:i.allrules[t[a]].alertTextCheckboxMultiple;break;case"select-one":if(!e.val())return i.allrules[t[a]].alertText;break;case"select-multiple":if(!e.find("option:selected").val())return i.allrules[t[a]].alertText}},_require:function(e,t,a,i,r){var l=t[a+1];switch(e.attr("type")){case"text":case"password":case"textarea":default:var o=T.trim(e.val()),n=T.trim(e.attr("data-validation-placeholder")),s=T.trim(e.attr("placeholder"));if(!o||n&&o==n||s&&o==s)return i.allrules[l].alertText;break;case"file":var d=e.attr("id"),u=T("#"+d+"_hidden").val();if((!T.trim(e.val())||e.val()==e.attr("data-validation-placeholder"))&&(""==u||"/"==u[u.length-1]||T("#"+d+"_delete").length&&T("#"+d+"_delete").prop("checked")))return i.allrules[l].alertText;break;case"radio":case"checkbox":var c=e.closest("form, .validationEngineContainer"),f=e.attr("name");if(0==c.find("input[name='"+f+"']:checked").length)return i.allrules[l].alertText;break;case"select-one":if(!e.val())return i.allrules[l].alertText;break;case"select-multiple":if(!e.find("option:selected").val())return i.allrules[l].alertText}},_groupRequired:function(e,t,a,i){var r="["+i.validateAttribute+"*="+t[a+1]+"]",l=!1;if(e.closest("form, .validationEngineContainer").find(r).each(function(){if(!F._required(T(this),t,a,i))return!(l=!0)}),!l)return i.allrules[t[a]].alertText},_groupRequire:function(e,t,a,i){var r="["+i.validateAttribute+"*="+t[a+1]+"]",l=!1;if(e.closest("form, .validationEngineContainer").find(r).each(function(){if(!F._require(T(this),t,a,i))return!(l=!0)}),!l)return i.allrules[t[a+1]].alertText},_custom:function(e,t,a,i){var r,l=t[a+1],o=i.allrules[l];if(o)if(o.regex){var n=o.regex;if(!n)return void alert("jqv:custom regex not found - "+l);if(!new RegExp(n).test(e.val()))return i.allrules[l].alertText}else{if(!o.func)return void alert("jqv:custom type not allowed "+l);if("function"!=typeof(r=o.func))return void alert("jqv:custom parameter 'function' is no function - "+l);if(!r(e,t,a,i))return i.allrules[l].alertText}else alert("jqv:custom rule not found - "+l)},_funcCall:function(e,t,a,i){var r,l=t[a+1];if(-1<l.indexOf(".")){for(var o=l.split("."),n=window;o.length;)n=n[o.shift()];r=n}else r=window[l]||i.customFunctions[l];if("function"==typeof r)return r(e,t,a,i)},_confirmed:function(e,t,a,i){var r=t[a+1];if(e.val()!=T("#"+r).val())return i.allrules.confirmed.alertText},_confirm:function(e,t,a,i){var r=t[a+1],l=i.allrules[r].regex;if(e.val()!=T("#"+l).val())return i.allrules[r].alertText},_maxSize:function(e,t,a,i){var r=t[a+1];if(r<e.val().length){var l=i.allrules.maxSize;return l.alertText+r+l.alertText2}},_minSize:function(e,t,a,i){var r=t[a+1];if(e.val().length<r){var l=i.allrules.minSize;return l.alertText+r+l.alertText2}},_min:function(e,t,a,i){var r=parseFloat(t[a+1]);if(parseFloat(e.val())<r){var l=i.allrules.min;return l.alertText2?l.alertText+r+l.alertText2:l.alertText+r}},_max:function(e,t,a,i){var r=parseFloat(t[a+1]);if(r<parseFloat(e.val())){var l=i.allrules.max;return l.alertText2?l.alertText+r+l.alertText2:l.alertText+r}},_past:function(e,t,a,i,r){var l,o=a[i+1],n=T(e.find("*[name='"+o.replace(/^#+/,"")+"']"));if("now"==o.toLowerCase())l=new Date;else if(null!=n.val()){if(n.is(":disabled"))return;l=F._parseDate(n.val())}else l=F._parseDate(o);if(l<F._parseDate(t.val())){var s=r.allrules.past;return s.alertText2?s.alertText+F._dateToString(l)+s.alertText2:s.alertText+F._dateToString(l)}},_isFuture:function(e,t,a,i,r){var l,o=a[i+1],n=r.allrules[o].regex,s=T(e.find("*[name='"+n.replace(/^#+/,"")+"']"));if("now"==n.toLowerCase())l=new Date;else if(null!=s.val()){if(s.is(":disabled"))return;l=F._parseDate(s.val())}else l=F._parseDate(n);if(F._parseDate(t.val())<l){o=a[i+1];return r.allrules[o].alertText}},_future:function(e,t,a,i,r){var l,o=a[i+1],n=T(e.find("*[name='"+o.replace(/^#+/,"")+"']"));if("now"==o.toLowerCase())l=new Date;else if(null!=n.val()){if(n.is(":disabled"))return;l=F._parseDate(n.val())}else l=F._parseDate(o);if(F._parseDate(t.val())<l)return r.allrules.future.alertText},_isDate:function(e){return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/).test(e)},_isDateTime:function(e){return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/).test(e)},_dateCompare:function(e,t){return new Date(e.toString())<new Date(t.toString())},_dateRange:function(e,t,a,i){return!i.firstOfGroup[0].value&&i.secondOfGroup[0].value||i.firstOfGroup[0].value&&!i.secondOfGroup[0].value?i.allrules[t[a]].alertText+i.allrules[t[a]].alertText2:F._isDate(i.firstOfGroup[0].value)&&F._isDate(i.secondOfGroup[0].value)&&F._dateCompare(i.firstOfGroup[0].value,i.secondOfGroup[0].value)?void 0:i.allrules[t[a]].alertText+i.allrules[t[a]].alertText2},_dateTimeRange:function(e,t,a,i){return!i.firstOfGroup[0].value&&i.secondOfGroup[0].value||i.firstOfGroup[0].value&&!i.secondOfGroup[0].value?i.allrules[t[a]].alertText+i.allrules[t[a]].alertText2:F._isDateTime(i.firstOfGroup[0].value)&&F._isDateTime(i.secondOfGroup[0].value)&&F._dateCompare(i.firstOfGroup[0].value,i.secondOfGroup[0].value)?void 0:i.allrules[t[a]].alertText+i.allrules[t[a]].alertText2},_maxCheckbox:function(e,t,a,i,r){var l=a[i+1],o=t.attr("name");if(l<e.find("input[name='"+o+"']:checked").length)return r.showArrow=!1,r.allrules.maxCheckbox.alertText2?r.allrules.maxCheckbox.alertText+" "+l+" "+r.allrules.maxCheckbox.alertText2:r.allrules.maxCheckbox.alertText},_minCheckbox:function(e,t,a,i,r){var l=a[i+1],o=t.attr("name");if(e.find("input[name='"+o+"']:checked").length<l)return r.showArrow=!1,r.allrules.minCheckbox.alertText+" "+l+" "+r.allrules.minCheckbox.alertText2},_maxTag:function(e,t,a,i){var r=e.attr("id"),l=t[a+1];if(l<T("#"+r).textext()[0].tags().tagElements().length)return i.allrules.maxTag.alertText+" "+l+" "+i.allrules.maxTag.alertText2},_minTag:function(e,t,a,i){var r=e.attr("id"),l=t[a+1];if(T("#"+r).textext()[0].tags().tagElements().length<l)return i.allrules.minTag.alertText+" "+l+" "+i.allrules.minTag.alertText2},_ajax:function(e,t,a,o){var i=t[a+1],n=o.allrules[i],r=n.extraData,l=n.extraDataDynamic,s={fieldId:e.attr("id"),fieldValue:e.val().replace(/</g,"%26lt;").replace(/>/g,"%26gt;").replace(/'/g,"%27")};if("object"==typeof r)T.extend(s,r);else if("string"==typeof r){var d=r.split("&");for(a=0;a<d.length;a++){var u=d[a].split("=");u[0]&&u[0]&&(s[u[0]]=u[1])}}if(l){var c=String(l).split(",");for(a=0;a<c.length;a++){var f=c[a];if(T(f).length){var v=e.closest("form, .validationEngineContainer").find(f).val();f.replace("#",""),escape(v);s[f.replace("#","")]=v}}}if("field"==o.eventTrigger&&delete o.ajaxValidCache[e.attr("id")],!o.isError&&!F._checkAjaxFieldStatus(e.attr("id"),o))return T.ajax({type:o.ajaxFormValidationMethod,url:n.url,cache:!1,dataType:"json",data:s,field:e,rule:n,methods:F,options:o,beforeSend:function(){},error:function(e,t){F._ajaxError(e,t)},success:function(e){var t=e[0],a=T("#"+t).eq(0);if(1==a.length){var i=e[1],r=e[2];if(i){if(o.ajaxValidCache[t]=!0,r){if(o.allrules[r])(l=o.allrules[r].alertTextOk)&&(r=l)}else r=n.alertTextOk;o.showPrompts&&(r?F._showPrompt(a,r,"pass",!0,o):F._closePrompt(a)),"submit"==o.eventTrigger&&void 0!==o.submitTask&&(""==o.submitFct&&""==o.submitTask?(JCck.Core.executeFunctionByName(o.submitPkg,window),JCck.Core.executeFunctionByName(o.submitPkg,window)):(JCck[o.submitPkg][o.submitFct](o.submitTask),JCck[o.submitPkg][o.submitFct](o.submitTask)))}else{var l;if(o.ajaxValidCache[t]=!1,o.isError=!0,r){if(o.allrules[r])(l=o.allrules[r].alertText)&&(r=l)}else r=n.alertText;o.showPrompts&&F._showPrompt(a,r,"",!0,o)}}a.trigger("jqv.field.result",[a,o.isError,r])}}),n.alertTextLoad},_ajaxError:function(e,t){0==e.status&&null==t?alert("The page is not served from a server! ajax call failed"):"undefined"!=typeof console&&console.log("Ajax error: "+e.status+" "+t)},_dateToString:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},_parseDate:function(e){var t=e.split(" "),a=[];if(t!=e){e=t[0];a=t[1].split(":")}var i=e.split("-");if(i==e&&(i=e.split("/")),a.length)var r=new Date(i[0],i[1]-1,i[2],a[0],a[1]-1,a[2]);else r=new Date(i[0],i[1]-1,i[2]);return r},_showPrompt:function(e,t,a,i,r,l){var o=F._getPrompt(e);l&&(o=!1),T.trim(t)&&(o?F._updatePrompt(e,o,t,a,i,r):F._buildPrompt(e,t,a,i,r))},_buildPrompt:function(e,t,a,i,r){var l=T("<div>");switch(l.addClass(F._getClassName(e.attr("id"))+"formError"),l.addClass("parentForm"+F._getClassName(e.closest("form, .validationEngineContainer").attr("id"))),l.addClass("formError"),a){case"pass":l.addClass("greenPopup");break;case"load":l.addClass("blackPopup")}i&&l.addClass("ajaxed");T("<div>").addClass("formErrorContent").html(t).appendTo(l);var o=e.data("promptPosition")||r.promptPosition;if(r.showArrow){var n=T("<div>").addClass("formErrorArrow");if("string"==typeof o)-1!=(s=o.indexOf(":"))&&(o=o.substring(0,s));switch(o){case"bottomLeft":case"bottomRight":l.find(".formErrorContent").before(n),n.addClass("formErrorArrowBottom").html('<div class="line1">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line10">\x3c!-- --\x3e</div>');break;case"topLeft":case"topRight":n.html('<div class="line10">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line1">\x3c!-- --\x3e</div>'),l.append(n)}}if(r.addPromptClass&&l.addClass(r.addPromptClass),l.css({opacity:0}),r.isOverflown||"inline"===o){"inline"===o?(l.addClass("inline"),void 0!==e.attr("data-prompt-target")&&0<T("#"+e.attr("data-prompt-target")).length?l.appendTo(T("#"+e.attr("data-prompt-target"))):e.after(l)):e.before(l);var s=F._calculatePosition(e,l,r)}else{T("body").append(l);s=F._calculatePositionBody(e,l,r)}return l.css({position:"inline"===o?"relative":"absolute",top:s.callerTopPosition,left:s.callerleftPosition,marginTop:s.marginTopSize,opacity:0}).data("callerField",e),r.autoHidePrompt&&setTimeout(function(){l.animate({opacity:0},function(){l.closest(".formErrorOuter").remove(),l.remove()})},r.autoHideDelay),l.animate({opacity:.87})},_updatePrompt:function(e,t,a,i,r,l,o){if(t){void 0!==i&&("pass"==i?t.addClass("greenPopup"):t.removeClass("greenPopup"),"load"==i?t.addClass("blackPopup"):t.removeClass("blackPopup")),r?t.addClass("ajaxed"):t.removeClass("ajaxed"),t.find(".formErrorContent").html(a);var n=e.data("promptPosition")||l.promptPosition;if(l.isOverflown||"inline"===n)var s=F._calculatePosition(e,t,l);else s=F._calculatePositionBody(e,t,l);var d={top:s.callerTopPosition,left:s.callerleftPosition,marginTop:s.marginTopSize};o?t.css(d):t.animate(d)}},_closePrompt:function(e){var t=F._getPrompt(e);t&&t.fadeTo("fast",0,function(){t.parent(".formErrorOuter").remove(),t.remove()})},closePrompt:function(e){return F._closePrompt(e)},_getPrompt:function(e){var t=T(e).closest("form, .validationEngineContainer").attr("id"),a=F._getClassName(e.attr("id"))+"formError",i=T("."+F._escapeExpression(a)+".parentForm"+t)[0];if(i)return T(i)},_escapeExpression:function(e){return e.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(e){var t=T(document),a=T("body"),i=e&&e.hasClass("rtl")||e&&"rtl"===(e.attr("dir")||"").toLowerCase()||t.hasClass("rtl")||"rtl"===(t.attr("dir")||"").toLowerCase()||a.hasClass("rtl")||"rtl"===(a.attr("dir")||"").toLowerCase();return Boolean(i)},_calculatePosition:function(e,t,a){var i,r,l,o=e.width(),n=e.position().left,s=e.position().top;e.height();i=r=0,l=-t.height();var d=e.data("promptPosition")||a.promptPosition,u="",c="",f=0,v=0;switch("string"==typeof d&&-1!=d.indexOf(":")&&(u=d.substring(d.indexOf(":")+1),d=d.substring(0,d.indexOf(":")),-1!=u.indexOf(",")&&(c=u.substring(u.indexOf(",")+1),u=u.substring(0,u.indexOf(",")),v=parseInt(c),isNaN(v)&&(v=0)),f=parseInt(u),isNaN(u)&&(u=0)),d){default:case"topRight":r+=n+o-30,i+=s;break;case"topLeft":i+=s,r+=n;break;case"centerRight":i=s+4,l=0,r=n+e.outerWidth(!0)+5;break;case"centerLeft":r=n-(t.width()+2),i=s+4,l=0;break;case"bottomLeft":i=s+e.height()+5,l=0,r=n;break;case"bottomRight":r=n+o-30,i=s+e.height()+5,l=0;break;case"inline":l=i=r=0}return{callerTopPosition:(i+=v)+"px",callerleftPosition:(r+=f)+"px",marginTopSize:l+"px"}},_calculatePositionBody:function(e,t,a){var i,r,l,o=e.width(),n=t.height(),s=a.isOverflown;if(s)i=r=0,l=-n;else{var d=e.offset();i=d.top,r=d.left,l=0}switch(a.promptPosition){default:case"topRight":s?r+=o-30:(r+=o-30,i+=-n);break;case"topLeft":i+=-n-10;break;case"centerRight":r+=o+13;break;case"bottomLeft":i=i+e.height()+15;break;case"bottomRight":r+=o-30,i+=e.height()+5}return{callerTopPosition:i+"px",callerleftPosition:r+"px",marginTopSize:l+"px"}},_saveOptions:function(e,t){if(T.validationEngineLanguage)var a=T.validationEngineLanguage.allRules;else T.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");T.validationEngine.defaults.allrules=a;var i=T.extend(!0,{},T.validationEngine.defaults,t);return i.formId=e.attr("id"),"adminForm"==i.formId?(i.submitPkg="Dev",i.submitFct="submit"):"seblod_form"==i.formId?(i.submitPkg="Core",i.submitFct="submit"):(i.submitPkg="Core",i.submitFct="submit_"+i.formId.replace("seblod_form_","")),e.data("jqv",i),i},_getClassName:function(e){if(e)return e.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(e){return e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(e,t,a,i){var r,l;for(r=a+1;r<t.length;r++)if((l=jQuery("#"+t[r]).first()).length&&null==F._required(l,["required"],0,i,!0))return F._required(e,["required"],0,i)},_condRequire:function(e,t,a,i){var r,l,o;for(r=a+1;r<t.length-1;r++)if(o=i.allrules[t[r]],(l=jQuery("#"+o.regex).first()).length&&null==F._required(l,["required"],0,i,!0))return F._require(e,t,a,i)},_submitButtonClick:function(e){var t=T(this);t.closest("form, .validationEngineContainer").data("jqv_submitButton",t.attr("id"))}};T.fn.validationEngine=function(e,t){var a=T(this);return a[0]?"string"==typeof e&&"_"!=e.charAt(0)&&F[e]?("showPrompt"!=e&&"hide"!=e&&"hideAll"!=e&&F.init.apply(a),F[e].apply(a,Array.prototype.slice.call(arguments,1))):"object"!=typeof e&&e?void T.error("Method "+e+" does not exist in jQuery.validationEngine"):(F.init.apply(a,arguments),F.attach.apply(a)):a},T.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,showPrompts:!0,validateNonVisibleFields:!1,promptPosition:"topRight",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:T.noop,onBeforeAjaxFormValidation:T.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,showArrow:!0,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onSuccess:!1,onFailure:!1,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:!1,autoHideDelay:1e4,fadeDuration:.3,prettySelect:!1,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:!1}},T(function(){T.validationEngine.defaults.promptPosition=F.isRTL()?"topLeft":"topRight"})}(jQuery);