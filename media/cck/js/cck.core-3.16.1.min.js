/* Copyright (C) 2009 - 2018 SEBLOD. All Rights Reserved. */
if("undefined"===typeof JCck)var JCck={};
!function($){function myCheck(e,t){return $.inArray(e,t)>=0?1:0}function myModal(e){var t={modal:null,defaults:{backclose:!0,backdrop:!0,body:!0,callbacks:{},class:"",close:!0,group:"ajax",header:!0,html:{close:'<button type="button" class="close" data-dismiss="modal"><span>Ã—</span></button>',loading:'<div class="loading"></div>',navigation:'<a class="prev" href="javascript:void(0);"><span><</span></a><a class="next" href="javascript:void(0);"><span>></span></a>'},keyboard:!0,loading:!0,loop:!1,mode:"ajax",navigation:!1,title:!0,url:{tmpl:""}}};return t.settings=$.extend(t.defaults,e||{}),t.groups={ajax:[]},t.currentIndex=0,t.referrer=null,t.build=function(){return t.remove(),$("body").append('<div id="modal-cck" class="modal fade modal-'+t.settings.mode+(""!=t.settings.class?" "+t.settings.class:"")+'">'+(t.settings.navigation?'<div class="modal-navigation">'+t.settings.html.navigation+"</div>":"")+(t.settings.header?'<div class="modal-header">'+(t.settings.title?"<h3>"+(!0!==t.settings.title?t.settings.title:"")+"</h3>":"")+"</div>":"")+'<div class="modal-content">'+(t.settings.body?'<div class="modal-body"></div>':"")+"</div></div></div>"),t.modal=$("#modal-cck"),t.container=t.modal.find(t.settings.body?".modal-body":".modal-content"),t.settings.close&&$(t.settings.html.close).prependTo(t.settings.header?t.modal.find(".modal-header"):t.modal),t.modal.modal({show:!1,backdrop:0!=t.settings.backdrop&&(0!=t.settings.backclose||"static"),keyboard:t.settings.keyboard}),t.modal.on("show",function(e){e.stopPropagation(),$("html").css("overflow","hidden"),t.callbacks.show(e)}),t.modal.on("shown",function(e){e.stopPropagation(),t.callbacks.shown(e)}),t.modal.on("hide",function(e){e.stopPropagation(),t.callbacks.hide(e)}),t.modal.on("hidden",function(e){e.stopPropagation(),$("html").css("overflow","auto"),t.callbacks.hidden(e)}),t},t.callbacks={show:function(e){void 0!==t.settings.callbacks.show&&t.settings.callbacks.show(e)},load:function(){t.container.empty(),t.settings.loading&&t.container.append(t.settings.html.loading),t.settings.navigation&&t.modal.find(".modal-navigation > a").addClass("hidden"),void 0!==t.settings.callbacks.load&&t.settings.callbacks.load()},loaded:function(){if(t.settings.loading&&t.container.find(".loading").remove(),t.settings.title){var e=t.modal.find("[data-cck-modal-title]");e.length&&t.modal.find(".modal-header h3").html(e.html())}var i=t.modal.find("[data-cck-modal-hash]");i.length&&(window.location.hash=i.html()),t.settings.navigation&&t.groups[t.settings.group].length>1&&(t.settings.loop?t.modal.find(".modal-navigation > a").removeClass("hidden"):(0!=t.currentIndex&&t.modal.find(".modal-navigation > a.prev").removeClass("hidden"),t.currentIndex!=t.groups[t.settings.group].length-1&&t.modal.find(".modal-navigation > a.next.hidden").removeClass("hidden"))),void 0!==t.settings.callbacks.loaded&&t.settings.callbacks.loaded()},shown:function(e){var i=$(window).scrollTop();$(window).on("scroll",function(){$(document).scrollTop(i)}),t.settings.navigation&&(t.modal.find(".modal-navigation > a.prev").on("click",function(e){e.preventDefault(),t.loadPrev()}),t.modal.find(".modal-navigation > a.next").on("click",function(e){e.preventDefault(),t.loadNext()})),t.settings.keyboard&&$(document.documentElement).on("keyup",t.keyboardHandler),void 0!==t.settings.callbacks.shown&&t.settings.callbacks.shown(e)},hide:function(e){void 0!==t.settings.callbacks.hide&&t.settings.callbacks.hide(e)},hidden:function(e){$(window).off("scroll"),history.replaceState("",document.title,window.location.pathname+window.location.search),t.remove(),void 0!==t.settings.callbacks.hidden&&t.settings.callbacks.hidden(e)},destroy:function(){void 0!==t.settings.callbacks.destroy&&t.settings.callbacks.destroy(),t.remove(),void 0!==(t={}).settings.callbacks.destroyed&&t.settings.callbacks.destroyed()},destroyed:function(){void 0!==t.settings.callbacks.destroyed&&t.settings.callbacks.destroyed()}},t.destroy=function(){return t.callbacks.destroy(),this},t.hide=function(){return t.modal.modal("hide"),this},t.init=function(){return $.each(t.groups,function(e,i){$.each(i,function(i){$(this).off("click"),$(this).on("click",function(a){a.preventDefault();var n=$(this),s=n.attr("href");t.referrer=this,t.settings=$.extend(t.settings,n.data("cck-modal")||{}),t.settings.group=e,t.currentIndex=i,t.loadUrl(s)})})}),this},t.keyboardHandler=function(e){switch(e.preventDefault(),e.keyCode){case 27:t.hide()}if(t.settings.navigation)switch(e.keyCode){case 37:t.loadPrev();break;case 39:t.loadNext()}},t.load=function(e,i){switch(t.callbacks.load(),t.settings.mode){case"iframe":var a='<iframe src="'+e+'" width="100%" height="100%" frameborder="0"></iframe>';t.container.html(a),t.callbacks.loaded(),i&&t.show();break;case"image":var n='<img src="'+e+'" />';t.container.html(n),t.callbacks.loaded(),i&&t.show();break;default:$.ajax({url:e,cache:!1}).done(function(e){t.container.html(e),t.callbacks.loaded(),i&&t.show()}).fail(function(){window.location.hash&&history.replaceState("",document.title,window.location.pathname+window.location.search)})}return this},t.loadPrev=function(){if(0==t.currentIndex){if(!t.settings.loop)return this;t.currentIndex=t.groups[t.settings.group].length-1}else t.currentIndex--;return t.load($(t.groups[t.settings.group][t.currentIndex]).attr("href"),!1),this},t.loadNext=function(){if(t.currentIndex==t.groups[t.settings.group].length-1){if(!t.settings.loop)return this;t.currentIndex=0}else t.currentIndex++;return t.load($(t.groups[t.settings.group][t.currentIndex]).attr("href"),!1),this},t.loadHtml=function(e){t.build(),t.callbacks.load(),t.container.html(e),t.callbacks.loaded(),t.show()},t.loadUrl=function(e){$.each(t.groups.ajax,function(i,a){if(JCck.Core.sourceURI+a.attr("href")==e)return t.settings.group="ajax",t.currentIndex=i,!1}),t.settings.url.tmpl&&(e.indexOf("?")>-1?e+="&":e+="?",e+="tmpl="+t.settings.url.tmpl),t.build().load(e,!0)},t.remove=function(){return $("body").find("#modal-cck").remove(),t.settings.keyboard&&$(document.documentElement).off("keyup",t.keyboardHandler),this},t.show=function(){return t.modal.modal("show"),this},t}function myOpposite(e){return 1==e?0:1}void 0===JCck.Core&&(JCck.Core={}),JCck.Core.doTask=function(e,t,i){void 0===i&&(i=document.getElementById("adminForm"));var a=i[e],n=t.split(".");if(a){for(var s=0;;s++){var o=i["cb"+s];if(!o)break;o.checked=!1}a.checked=!0,i.boxchecked.value=1,"update"==n[0]&&""!=n[1]&&(t=n[0],jQuery("#seblod_form").append('<input type="hidden" id="task2" name="task2" value="'+n[1]+'">')),Joomla.submitbutton(t)}return!1},JCck.Core.executeFunctionByName=function(e,t){for(var i=[].slice.call(arguments).splice(2),a=e.split("."),n=a.pop(),s=0;s<a.length;s++)t=t[a[s]];return t[n].apply(this,i)},JCck.Core.getModal=function(e){return myModal(e)},JCck.Core.submitForm=function(e,t){void 0===t&&(t=document.getElementById("adminForm")),void 0!==e&&""!==e&&(t.task.value=e),"function"==typeof t.onsubmit&&t.onsubmit(),"function"==typeof t.fireEvent&&t.fireEvent("onsubmit"),"function"!=typeof jQuery||"form.cancel"==e||"cancel"==e?t.submit():("search"==e&&jQuery("[data-cck-remove-before-search]","#"+t.id).removeAttr("name"),jQuery(t).submit())},JCck.Core.submitTask=function(e,t,i,a){jQuery("#"+a+' input:checkbox[name="cid[]"]:checked').prop("checked",!1),jQuery("#"+a+" #"+i).prop("checked",!0),jQuery("#"+a+" #boxchecked").myVal(1),jQuery("#"+a).append('<input type="hidden" name="tid" value="'+t+'">'),JCck.Core.submitForm(e,document.getElementById(a)),jQuery("#"+a+" #"+i).prop("checked",!1)},JCck.Modals=[],$.fn.clearForm=function(){return this.each(function(){$(":input",this).each(function(){var e=this.type,t=this.tagName.toLowerCase();if("text"==e||"password"==e||"textarea"==t)this.value="";else if("hidden"==e)$(this)[0].hasAttribute("data-cck-keep-for-search")||(this.value="");else if("checkbox"==e||"radio"==e)this.checked=!1;else if("select-multi"==e||"select-multiple"==e)this.selectedIndex=-1;else if("select"==t){for(var i=0,a=0;a<this.options.length;a++)if(""==this.options[a].value){i=1;break}i?this.value="":this.selectedIndex=0}})})},$.fn.conditionalState=function(e){var t=$(this),i=e.rule||"";if(e.conditions.length>1){var a="or"==i?1:e.conditions.length,n={};jQuery.each(e.conditions,function(i,s){var o=$("#"+s.trigger);if(s.trigger&&null!=o){var d=s.type;if("isChanged"==d)d="change";else if("isPressed"==d)d="click";else if("isSubmitted"==d)d="keypress";else{n[o.attr("id")]=parseInt(o.myConditional(s.type,s));var c=0;jQuery.each(n,function(e,t){1==t&&c++}),l=c>=a?1:0,jQuery.each(e.states,function(e,i){t.myState(0,l,i.type,i)}),d="change"}o.on(d,function(i){if("keypress"!=d||13==i.which){var c=parseInt(o.myConditional(s.type,s));if("click"==d||"keypress"==d)var r=c;else{r=0;n[o.attr("id")]=c}jQuery.each(n,function(e,t){1==t&&r++}),l=r>=a?1:0,jQuery.each(e.states,function(e,i){t.myState(1,l,i.type,i)})}})}})}else{var s=$("#"+e.conditions[0].trigger);if(e.conditions[0].trigger&&null!=s){var o=e.conditions[0].type;if("isChanged"==o)o="change";else if("isPressed"==o)o="click";else if("isSubmitted"==o)o="keypress";else{var l=s.myConditional(e.conditions[0].type,e.conditions[0]);jQuery.each(e.states,function(e,i){t.myState(0,l,i.type,i)}),o="change"}s.on(o,function(i){if("keypress"!=o||13==i.which){var a=s.myConditional(e.conditions[0].type,e.conditions[0]);jQuery.each(e.states,function(e,i){t.myState(1,a,i.type,i)})}})}}},$.fn.conditionalStateLegacy=function(e){var t=$("#"+e.conditions._0isEqual.trigger),i=$(this);if(e.conditions._0isEqual.trigger&&null!=t){var a=t.myConditional("isEqual",e.conditions._0isEqual);jQuery.each(e.states,function(e,t){i.myState(0,a,e.substr(2),t)}),t.on("change",function(){var a=t.myConditional("isEqual",e.conditions._0isEqual);jQuery.each(e.states,function(e,t){i.myState(1,a,e.substr(2),t)})})}},$.fn.conditionalStates=function(e){var t=$(this),i=e.length;if(void 0===i)e.rule?t.conditionalState(e):t.conditionalStateLegacy(e);else for(var a=0;a<i;a++)e[a].rule?t.conditionalState(e[a]):t.conditionalStateLegacy(e[a])},$.fn.deepestHeight=function(){var e=0;$(this).each(function(){e=Math.max(e,$(this).height())}).height(e)},$.fn.isStillReady=function(){return!$(this).hasClass("busy")&&($(this).addClass("busy"),!0)},$.fn.myAttr=function(e){var t=$(this);if(t.is("select"))var i=$.trim(t.find("option:selected").attr(e));else if(t.is("fieldset"))i=$.trim(t.find("input:checked").attr(e));else i=$.trim(t.attr(e));return i},$.fn.myConditional=function(e,t){var i=this.attr("id"),a=0;if(!$(this).length)return 0;switch(e){case"callFunction":var n=t.value;window[n]&&(a=window[n]());break;case"isChanged":case"isPressed":return 1;case"isFilled":case"isEmpty":void 0!==$(this).myVal()&&null!==$(this).myVal()&&""!=$(this).myVal()&&(a=1),"isEmpty"==e&&(a=myOpposite(a));break;case"isEqual":case"isDifferent":default:var s=t.value.split(",");if("FIELDSET"==this[0].tagName){var o="";$("#"+i+" input:checked").length>1?$("#"+i+" input:checked").each(function(){o=parseInt(myCheck($(this).val(),s)),a+=o}):(1==$("#"+i+" input:checked").length&&(o=$("#"+i+" input:checked").val()),a=myCheck(o,s))}else a=myCheck(this.val(),s);a=a>0?1:0,"isDifferent"==e&&(a=myOpposite(a))}return a},$.fn.myState=function(e,t,i,a){var n=0,s=this.attr("id")+a.selector,o=a.value,l="0"==a.revert?0:1;switch(i){case"hasClass":case"hasNotClass":"hasNotClass"==i&&(l?t=myOpposite(t):1==t&&(t=myOpposite(t),l=1)),1==t?$("#"+s).addClass(o):l&&$("#"+s).removeClass(o);break;case"isEnabled":case"isDisabled":"isDisabled"==i&&(l?t=myOpposite(t):1==t&&(t=myOpposite(t),l=1)),1==t?$("#"+s).prop("disabled",!1):l&&$("#"+s).prop("disabled",!0);break;case"isFilled":case"isFilledBy":case"isEmpty":"isEmpty"==i&&(l?(t=myOpposite(t),n=1):1==t&&(t=myOpposite(t),l=1));var d=$("#"+s).attr("id"),c="";if(1==t){if("isFilledBy"==i){var r=o.split("@");o=r[1]?$("#"+r[0]).myAttr(r[1]):$("#"+o).myVal()}c=$("#"+s).is(":input")||$("#"+s).is("fieldset")?"myVal":"text",n&&""==o||($("#"+s)[c](o),$("#_"+d).length&&(c=$("#_"+d).is(":input")?"myVal":"text",$("#_"+d)[c](o)))}else l&&(c=$("#"+s).is(":input")||$("#"+s).is("fieldset")?"myClear":"text",$("#"+s)[c](),$("#_"+d).length&&(c=$("#_"+d).is(":input")?"val":"text",$("#_"+d)[c]("")));break;case"isComputed":break;case"triggers":d=$("#"+s).attr("id");$("#"+d).trigger(o);break;case"isVisible":case"isHidden":default:"isHidden"==i&&(l?t=myOpposite(t):1==t&&(t=myOpposite(t),l=1)),0==e&&(o=""),1==t?"fade"==o?$("#"+s).fadeIn():"slide"==o?$("#"+s).slideDown():$("#"+s).show():l&&("fade"==o?$("#"+s).fadeOut():"slide"==o?$("#"+s).slideUp():$("#"+s).hide())}},$.fn.myClear=function(e){if(this[0]){var t=this[0];if("FIELDSET"==t.tagName)1==arguments.length?$("#"+this.attr("id")+" input:checked").each(function(){e==$(this).val()&&$("#"+$(this).attr("id")).prop("checked",!1)}):$("#"+this.attr("id")+" input").prop("checked",!1);else if("SELECT"==t.tagName&&this.prop("multiple"))this.find('option[value="'+e+'"]').prop("selected",!1);else if("SELECT"!=t.tagName||this.prop("multiple"))this.val("");else{for(var i=0,a=0;a<t.options.length;a++)if(""==t.options[a].value){i=1;break}i?this.val(""):t.selectedIndex=0}}},$.fn.myVal=function(e){if(1==arguments.length)var t=1;else t=0,e="";if(!this[0])return"";var i=this[0];if("FIELDSET"!=i.tagName&&"DIV"!=i.tagName)return"SELECT"==i.tagName&&this.prop("multiple")?t?e?this.val(e.split(",")):this.val(e):this.val():t?this.val(e):this.val();var a="#"+this.attr("id"),n="";if(e)$(a+" input").val(e.split(","));else{if($(a+" input:checked").length>1)return $(a+" input:checked").each(function(){n+=","+$(this).val()}),n.substr(1);if(1==$(a+" input:checked").length)return $(a+" input:checked").val()}},$.fn.CckModal=function(){var modals={},parents=[];$(this).each(function(i,e){var element=$(e),parent=!1;if(void 0!==element.data("cck-modal").parent)var parent=element.data("cck-modal").parent;var group=void 0!==element.data("cck-modal").mode?element.data("cck-modal").mode:"ajax";if(void 0!==element.data("cck-modal").group&&(group=element.data("cck-modal").group),void 0!==element.data("cck-modal").parent){var parent=element.data("cck-modal").parent;parents.indexOf(parent)>-1||parents.push(parent),void 0===eval(parent).groups[group]&&(eval(parent).groups[group]=[]),eval(parent).groups[group].push(element)}else void 0===modals[group]&&(modals[group]=[]),modals[group].push(element)}),$.each(parents,function(i,e){eval(e).init()}),$.each(modals,function(e,t){var i=myModal();i.groups[e]=t,i.init()})},$(document).ready(function(){$("a[data-cck-modal]").CckModal()})}(jQuery);